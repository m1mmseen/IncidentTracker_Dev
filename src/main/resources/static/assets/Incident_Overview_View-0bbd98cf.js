import{_ as f,f as b,o as n,c as o,F as _,g,a as t,t as d,d as l,m as v,h as p,b as r,N as k}from"./index-5c91603c.js";import{P as y}from"./PageTitleWithButton-fa2fdc35.js";import{a as u}from"./axios-4a70c6fc.js";import{U as w}from"./User_Footer_Menu-4650752f.js";const I={name:"IncidentTable",data(){return{incidents:[]}},created(){this.fetchIncidents()},methods:{async fetchIncidents(){try{const e=await u.get("api/incidents");this.incidents=e.data}catch(e){console.error("Error occurred fetching incidents:",e)}},goToDetails(e){b.push({name:"incident-detail",params:{id:e}})},async deleteIncident(e){try{await u.delete(`/api/incident/${e}`),await this.fetchIncidents(),await alert("deleted")}catch(i){console.error("Error occurred deleting incidents:",i)}},edit(){}}},x=t("div",{class:"visually-hidden bg-info z-3 position-absolute bottom-0 end-0 p-5 rounded-3",id:"info"},[t("h1",null,"Geht")],-1),T=["onClick"],B={class:"card-header m-0 pt-1 pb-0"},C={class:"float-start"},N={class:"bg-warning p4"},$={key:0},D=t("b",null,"solved",-1),E={key:1},S=t("b",null,"open",-1),V={class:"card-body pt-1"},F={class:"card-text m-0 p-0"},P={class:"btn-group float-end"},R=["onClick"];function M(e,i,h,G,m,a){return n(),o(_,null,[x,(n(!0),o(_,null,g(m.incidents,s=>(n(),o("div",{class:"card mt-2",key:s.id,onClick:c=>a.goToDetails(s.id)},[t("div",B,[t("b",C,[t("span",N,d(s.id),1),l(d(s.titel),1)]),t("span",v({class:"float-end"},e.$attrs),[t("b",null,[s.isSolved?(n(),o("p",$,[l(" Status: "),D])):(n(),o("p",E,[l(" Status: "),S]))])],16)]),t("div",V,[t("p",F,d(s.description),1),t("div",P,[t("button",{class:"btn btn-outline-dark",onClick:i[0]||(i[0]=p((...c)=>a.edit&&a.edit(...c),["stop"]))},"Edit"),t("button",{class:"btn btn-outline-dark",onClick:p(c=>a.deleteIncident(s.id),["stop"])},"Delete",8,R)])])],8,T))),128))],64)}const U=f(I,[["render",M]]),z={class:"container-sm"},q={__name:"Incident_Overview_View",setup(e){return(i,h)=>(n(),o(_,null,[r(k),r(y,{msg:"Incidents",destination:"/incidents/create",buttonText:"Report new Incident"}),t("div",z,[r(U)]),r(w)],64))}};export{q as default};
