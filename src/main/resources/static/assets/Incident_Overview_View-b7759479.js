import{_ as f,f as I,o,c as s,F as p,g as k,a as t,t as l,d as _,m as y,h,N as $,r,b as d}from"./index-0a367493.js";import{P as B}from"./PageTitleWithButton-67b58c5d.js";import{a as m}from"./axios-4a70c6fc.js";import{U as x}from"./User_Footer_Menu-fd2d380d.js";const T={name:"IncidentTable",data(){return{incidents:[]}},created(){this.fetchIncidents()},methods:{async fetchIncidents(){try{const e=await m.get("api/incidents");this.incidents=e.data}catch(e){console.error("Error occurred fetching incidents:",e)}},goToDetails(e){console.log("From row:"+e),I.push({name:"incident-details",params:{id:e}})},async deleteIncident(e){try{await m.delete(`/api/incident/${e}`),await this.fetchIncidents(),await alert("deleted")}catch(i){console.error("Error occurred deleting incidents:",i)}},edit(){}}},N=t("div",{class:"visually-hidden bg-info z-3 position-absolute bottom-0 end-0 p-5 rounded-3",id:"info"},[t("h1",null,":)")],-1),C=["onClick"],F={class:"card-header m-0 pt-1 pb-0"},P={class:"float-start"},R={class:"bg-warning p4"},D={key:0},E=t("b",null,"solved",-1),M={key:1},S=t("b",null,"open",-1),U={class:"card-body pt-1"},V={class:"card-text m-0 p-0"},W={class:"btn-group float-end"},z=["onClick"];function L(e,i,g,b,u,a){return o(),s(p,null,[N,(o(!0),s(p,null,k(u.incidents,n=>(o(),s("div",{class:"card mt-2",key:n.id,onClick:c=>a.goToDetails(n.id)},[t("div",F,[t("b",P,[t("span",R,l(n.id),1),_(l(n.titel),1)]),t("span",y({class:"float-end"},e.$attrs),[t("b",null,[n.isSolved?(o(),s("p",D,[_(" Status: "),E])):(o(),s("p",M,[_(" Status: "),S]))])],16)]),t("div",U,[t("p",V,l(n.description),1),t("div",W,[t("button",{class:"btn btn-outline-dark",onClick:i[0]||(i[0]=h((...c)=>a.edit&&a.edit(...c),["stop"]))},"Edit"),t("button",{class:"btn btn-outline-dark",onClick:h(c=>a.deleteIncident(n.id),["stop"])},"Delete",8,z)])])],8,C))),128))],64)}const O=f(T,[["render",L]]),j={components:{NavigationBar:$,PageTitleWithButton:B,IncidentRow:O,User_Footer_Menu:x}},q={class:"container-sm"};function A(e,i,g,b,u,a){const n=r("NavigationBar"),c=r("PageTitleWithButton"),v=r("IncidentRow"),w=r("User_Footer_Menu");return o(),s(p,null,[d(n),d(c,{msg:"Incidents",destination:"/incidents/create",buttonText:"Report new Incident"}),t("div",q,[d(v)]),d(w)],64)}const Q=f(j,[["render",A]]);export{Q as default};
